<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vega-Lite Interactive Visualizations</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>

    <h1>ERP 2022 vs. ERP 2023 by Region</h1>
    <div id="act_diagram"></div>

    <h1>Details for Selected State/Territory</h1>
    <div id="dynamic_chart"></div>

    <script type="text/javascript">
        // Embed the ACT diagram visualization
        vegaEmbed('#act_diagram', 'act_edited.vg.json', {
            actions: false
        }).then(function(result) {
            // Listen for state selection changes
            result.view.addSignalListener('stateSelection', function(name, value) {
                let selectedState = value.State_Territory;

                // Based on the selected state, load the appropriate visualization
                if (selectedState === 'South Australia') {
                    vegaEmbed('#dynamic_chart', 'SA_diagram.vg.json').catch(console.error);
                } else if (selectedState === 'Victoria') {
                    vegaEmbed('#dynamic_chart', 'VIC_diagram.vg.json').catch(console.error);
                } 
                // Add more conditions for other states as needed
                else {
                    document.getElementById('dynamic_chart').innerHTML = '<p>No data available for this region.</p>';
                }
            });
        }).catch(console.error);

    </script>

</body>
</html>
